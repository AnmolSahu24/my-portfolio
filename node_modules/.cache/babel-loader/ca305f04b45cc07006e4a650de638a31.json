{"ast":null,"code":"/**\n * @typedef {import('mdast').Footnote} Footnote\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport { footnoteReference } from './footnote-reference.js';\n\n/**\n * @type {Handler}\n * @param {Footnote} node\n */\nexport function footnote(h, node) {\n  const footnoteById = h.footnoteById;\n  const footnoteOrder = h.footnoteOrder;\n  let no = 1;\n  while (no in footnoteById) no++;\n  const identifier = String(no);\n\n  // No need to check if `identifier` exists in `footnoteOrder`, itâ€™s guaranteed\n  // to not exist because we just generated it.\n  footnoteOrder.push(identifier);\n  footnoteById[identifier] = {\n    type: 'footnoteDefinition',\n    identifier,\n    children: [{\n      type: 'paragraph',\n      children: node.children\n    }],\n    position: node.position\n  };\n  return footnoteReference(h, {\n    type: 'footnoteReference',\n    identifier,\n    position: node.position\n  });\n}","map":null,"metadata":{},"sourceType":"module"}